+keyframes(noise-anim)
  $steps: 20
  @for $i from 0 through $steps
    #{percentage($i * 1 / $steps)}
      clip: rect(random(100) + px, 9999px, random(100) + px, 0)
+keyframes(noise-anim-2)
  $steps: 20
  @for $i from 0 through $steps
    #{percentage($i * 1 / $steps)}
      clip: rect(random(100) + px, 9999px, random(100) + px, 0)

=glitch($cl: white, $bg-col: black)
  +relative
  overflow: hidden
  +inline-block
  color: $cl
  &:after,
  &:before
    content: attr(data-text)
    color: $cl
    background-color: $bg-col
    overflow: hidden
    clip: rect(0, 900px, 0, 0)
  &:after
    +absolute(left 1px, top 0)
    +text-shadow(-1px 0 0 rgba(red, 0.4))
    +experimental('animation', noise-anim 2s infinite linear alternate-reverse)
  &:before
    +absolute(left -1px, top 0)
    +text-shadow(1px 0 0 rgba(blue, 0.4))
    +experimental('animation', noise-anim-2 3s infinite linear alternate-reverse)
